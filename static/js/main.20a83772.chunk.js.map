{"version":3,"sources":["components/common/MMHeading.js","components/Charts/ETLChartComponent.js","components/Charts/ETLCharts.js","components/common/MMButton.js","components/ETLStreamButtons.js","util/helperFunctions.js","util/streamNamesArray.js","util/services.js","components/ETLDashboard.js","components/HeaderArea/ETLHeaderArea.js","components/HeaderArea/ETLHead.js","components/Table/EnhancedTableToolbar.js","components/Table/ETLTableHead.js","components/Table/ETLTableComponent.js","components/Charts/ETLPieChart.js","hooks/useInterval.js","components/Table/ETLTable.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","header","marginBottom","textAlign","logo","height","padding","width","MMHeading","title","justifyValue","typographyVariant","gridDirectionValue","component","Grid","container","direction","justify","alignItems","Typography","variant","ETLChartComponent","chartData","parserType","chartText","chartRef","useRef","categoryChartDomRef","useEffect","current","data","labels","datasets","update","xyParser","xAxisKey","yAxisKey","setAttribute","Chart","type","elements","bar","label","backgroundColor","options","maintainAspectRatio","responsive","indexAxis","parsing","animations","scales","x","grid","display","ticks","autoSkip","y","plugins","text","position","font","size","weight","legend","renderChart","useMemo","ref","id","ETLCharts","topN","handleTopN","clientTotals","companyTotals","categoryTotals","renderCompanyChart","item","renderCategoryChart","renderClientChart","renderTopN","style","marginRight","TextField","onChange","value","marginLeft","paddingTop","spacing","xs","submitButton","textTransform","fontFamily","fontWeight","color","fontSize","MMButton","directionValue","gridStyle","alignItemsValue","buttonVariant","buttonType","onClickCb","disableButton","buttonText","loading","smValue","buttonStyle","classes","Fragment","Button","fullWidth","onClick","className","disabled","CircularProgress","theme","gridContainer","margin","breakpoints","up","flexWrap","ETLStreamButtons","isStartLoading","isStopLoading","isClearLoading","handleOnStart","handleOnStop","handleClearTables","updatedArray","newMessage","bankClientsTotals","keys","_bankClientsTotals","_","isEmpty","push","sort","totalA","totalB","total_amount","slicedArray","uniqBy","newArr","length","slice","updatedBankClientsTotals","streamNamesArray","streamTableNamesArray","client","jsc8","url","process","REACT_APP_GDN_URL","apiKey","REACT_APP_API_KEY","fabricName","REACT_APP_FABRIC_NAME","executeRestqlQuery","restQlName","bindVars","executeRestql","resp","result","console","error","clearTablesData","a","Promise","all","map","element","collection","truncate","log","startStopStream","start","streamPromises","forEach","activateStreamApp","establishConnection","streamName","stream","getOtp","consumerOTP","_consumer","consumer","Math","round","random","replace","otp","on","getBankClientNames","queryName","i","offsetValue","bankClientsResponse","bankClientNames","reduce","_bankClientNames","bankClients","b","localeCompare","streamNameConnectionName","ETLDashboard","useState","categoriesTotal","setCategoriesTotal","clientsTotal","setClientsTotal","companyTotal","setCompaniesTotal","streamConnections","setStreamConnections","setIsClearLoading","setIsStartLoading","setIsStopLoading","setTopN","setTopNContext","then","handleClose","event","preventDefault","returnValue","window","addEventListener","removeEventListener","clearTables","useCallback","closeWebSocket","terminate","messageManipulation","msg","newData","encodedMessage","JSON","parse","payload","messageId","decodedMessage","atob","parseMessage","hasOwnProperty","startWebSocket","cur","cloneDeep","send","stringify","prev","num","target","Number","handleClearAllTables","renderCharts","titleStyle","wordSpacing","content","subtitle","lineHeight","ETLHeaderArea","ETLHead","right","top","open","useToolbarStyles","root","paddingLeft","paddingRight","maxHeight","formControl","minWidth","highlight","palette","secondary","main","lighten","light","primary","dark","flex","EnhancedTableToolbar","selectedClient","isLoading","handleSelectClient","colourStyles","control","styles","option","isDisabled","isFocused","isSelected","placeholder","defaultStyles","Toolbar","clsx","getOptionLabel","getOptionValue","justifyContent","marginTop","EnhancedTableHead","tableType","headCells","numeric","disablePadding","TableHead","TableRow","headCell","TableCell","align","border","paper","visuallyHidden","clip","overflow","EnhancedTable","tableData","page","setPage","rowsPerPage","setRowsPerPage","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","emptyRows","min","renderActualTable","Paper","TableContainer","Table","aria-labelledby","aria-label","TableBody","row","index","labelId","hover","role","tabIndex","scope","client_name","date","date_start","txn_id","date_end","product_category_name","amount","_key","colSpan","alignContent","TablePagination","rowsPerPageOptions","count","onChangePage","onChangeRowsPerPage","ETLPieChart","hoverOffset","useInterval","callback","delay","savedCallback","setInterval","clearInterval","ETLTable","setTableData","setSelectedClient","setBankClients","anonymousBankClientNames","setAnonymousBankClientNames","setTableType","totals","setTotals","setIsLoading","getAnonymousBankClientName","_anonymousBankClientNames","sliceArray","getPieChartData","getBankClients","getTableData","clientName","handleTableType","name","renderTableButtons","renderTable","sum","createMuiTheme","overrides","MuiFormControl","MuiInputBase","typography","join","MuiTypography","h6","App","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.20a83772.chunk.js","sourcesContent":["import React from \"react\";\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(() => ({\n  header: {\n    marginBottom: \"2rem\",\n    textAlign: \"center\",\n  },\n  logo: {\n    height: \"28px\",\n    padding: \"1rem 0 2.5rem\",\n    width: \"auto\",\n  },\n}));\n\nexport const MMHeading = ({\n  title,\n  justifyValue = \"center\",\n  typographyVariant = \"h3\",\n  gridDirectionValue = \"row\",\n  component = \"h1\",\n}) => {\n  const classes = useStyles();\n  return (\n    <Grid\n      container\n      direction={gridDirectionValue}\n      justify={justifyValue}\n      alignItems={\"flex-start\"}\n    >\n      <Typography variant={typographyVariant} component={component}>\n        {title}\n      </Typography>\n    </Grid>\n  );\n};\n","import React, { useMemo, useEffect, useRef } from \"react\";\nimport Chart from \"chart.js/auto\";\nconst ETLChartComponent = ({ chartData, parserType = \"\", chartText }) => {\n  const chartRef = useRef(null);\n  const categoryChartDomRef = useRef(null);\n\n  useEffect(() => {\n    if (chartRef.current) {\n      chartRef.current.data.labels = [];\n      chartRef.current.data.datasets[0].data = chartData;\n      chartRef.current.update();\n    }\n  }, [chartRef, chartData]);\n\n  useEffect(() => {\n    if (!chartRef.current && categoryChartDomRef.current) {\n      let xyParser = {\n        xAxisKey: \"total_amount\",\n        yAxisKey: \"client_name\",\n      };\n\n      if (parserType === \"companyTotals\") {\n        xyParser.yAxisKey = \"product_company\";\n      }\n\n      if (parserType === \"categoryTotals\") {\n        xyParser.yAxisKey = \"product_category_name\";\n      }\n      categoryChartDomRef.current.setAttribute(\"height\", \"200%\");\n      chartRef.current = new Chart(categoryChartDomRef.current, {\n        type: \"bar\",\n        elements: {\n          bar: {\n            // borderWidth: 10,\n          },\n        },\n        data: {\n          datasets: [\n            {\n              label: \"Totals\",\n              data: chartData,\n              backgroundColor: [\"#338AD0\"],\n            },\n          ],\n        },\n        options: {\n          maintainAspectRatio: true,\n          responsive: true,\n          indexAxis: \"y\",\n          parsing: xyParser,\n          animations: true,\n          scales: {\n            x: {\n              grid: {\n                display: false,\n              },\n              ticks: {\n                autoSkip: false,\n              },\n            },\n            y: {\n              grid: {\n                display: false,\n              },\n              ticks: {\n                autoSkip: false,\n              },\n            },\n          },\n          plugins: {\n            title: {\n              text: chartText,\n              position: \"bottom\",\n              display: true,\n              font: {\n                size: 16,\n                weight: \"bold\",\n              },\n            },\n            legend: {\n              display: false,\n            },\n          },\n          // disable for all datasets\n        },\n      });\n    }\n  }, [chartData, parserType, chartText]);\n\n  const renderChart = useMemo(() => {\n    return <canvas ref={categoryChartDomRef} />;\n  }, []);\n\n  return <div id=\"chart\">{renderChart}</div>;\n};\n\nexport default ETLChartComponent;\n","import React, { useMemo } from \"react\";\nimport { Grid, TextField, Card, CardContent } from \"@material-ui/core\";\nimport { MMHeading } from \"../common/MMHeading\";\nimport ETLChartComponent from \"./ETLChartComponent\";\n\nexport const ETLCharts = ({\n  topN,\n  handleTopN,\n  clientTotals,\n  companyTotals,\n  categoryTotals,\n  // webSocketOpen,\n}) => {\n  const renderCompanyChart = useMemo(() => {\n    return (\n      <Grid\n        item\n        // sm={4}\n        // style={{\n        //   boxShadow: \"2px 5px 5px 2px #d4d4d4\",\n        //   borderRadius: \"0.375rem\",\n        // }}\n      >\n        <ETLChartComponent\n          chartData={companyTotals}\n          parserType=\"companyTotals\"\n          chartText=\"Merchant Totals($)\"\n        />\n      </Grid>\n    );\n  }, [companyTotals]);\n  const renderCategoryChart = useMemo(() => {\n    return (\n      <Grid\n        item\n        // sm={4}\n        // style={{\n        //   boxShadow: \"2px 5px 5px 2px #d4d4d4\",\n        //   borderRadius: \"0.375rem\",\n        // }}\n      >\n        <ETLChartComponent\n          chartData={categoryTotals}\n          parserType=\"categoryTotals\"\n          chartText=\"Category Totals($)\"\n        />\n      </Grid>\n    );\n  }, [categoryTotals]);\n\n  const renderClientChart = useMemo(() => {\n    return (\n      <Grid\n        item\n        // sm={4}\n        // style={{\n        //   boxShadow: \"2px 5px 5px 2px #d4d4d4\",\n        //   borderRadius: \"0.375rem\",\n        // }}\n      >\n        <ETLChartComponent\n          chartData={clientTotals}\n          parserType=\"clientTotals\"\n          chartText=\"Purchaser Totals($)\"\n        />\n      </Grid>\n    );\n  }, [clientTotals]);\n\n  const renderTopN = useMemo(() => {\n    return (\n      <>\n        <Grid item style={{ marginRight: \"10px\" }}>\n          <MMHeading\n            title=\"TopN\"\n            justifyValue=\"center\"\n            typographyVariant=\"h6\"\n          />\n        </Grid>\n        <Grid item>\n          <TextField\n            id=\"outlined-basic\"\n            label=\"TopN\"\n            variant=\"outlined\"\n            size=\"small\"\n            onChange={handleTopN}\n            value={topN}\n            //  disabled={webSocketOpen}\n          />\n        </Grid>\n      </>\n    );\n  }, [topN, handleTopN]);\n\n  return (\n    <div\n      style={{\n        marginLeft: \"3vw\",\n        marginRight: \"3vw\",\n      }}\n    >\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"flex-start\"\n        style={{ paddingTop: \"30px\" }}\n      >\n        {renderTopN}\n      </Grid>\n      <Grid container spacing={5}>\n        <Grid item xs={4}>\n          {renderClientChart}\n        </Grid>\n        <Grid item xs={4}>\n          {renderCompanyChart}\n        </Grid>\n        <Grid item xs={4}>\n          {renderCategoryChart}\n        </Grid>\n      </Grid>\n      {/* <Grid item>\n          //bublechart\n          <ETLChartComponent\n            category={companyCategories}\n            categoryTotals={companyTotals}\n          />\n        </Grid> */}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Grid, Button, makeStyles, CircularProgress } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(() => ({\n  submitButton: {\n    // radius:\"50%\",\n    // backgroundColor: \"#338ad0\",\n    // color: \"#ffffff\",\n    // borderRadius: \"7%\",\n    textTransform: \"capitalize\",\n    // border: \"1px solid #0000006b\",\n    backgroundColor: \"rgba(211,225,240,1)\",\n\n    marginRight: \"20px\",\n    width: \"100%\",\n    // padding: \"10px 0px\",\n    fontFamily: \"Lato\",\n    fontWeight: \"900\",\n    color: \"rgba(0,0,0,1)\",\n    fontSize: \"16px\",\n\n    // // \"&:hover\": {\n    // //   backgroundColor: \"#1971b3\",\n    // //   \"&:disabled\": {\n    // //     backgroundColor: \"#85c1f5\",\n    // //     boxShadow: \"none\",\n    // //     color: \"#def0ff\",\n    // //   },\n    // },\n    // \"&:disabled\": {\n    //   backgroundColor: \"#85c1f5\",\n    //   boxShadow: \"none\",\n    //   color: \"#def0ff\",\n    // },\n  },\n}));\n\nexport const MMButton = ({\n  directionValue = \"row\",\n  gridStyle,\n  justifyValue = \"center\",\n  alignItemsValue = \"center\",\n  buttonVariant = \"contained\",\n  buttonType = \"submit\",\n  onClickCb,\n  disableButton,\n  buttonText,\n  loading,\n  smValue = 6,\n  buttonStyle = {},\n  id,\n}) => {\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      {/* <Grid\n        container\n        item\n        style={gridStyle}\n        justify={justifyValue}\n        alignItems={alignItemsValue}\n        sm={smValue}\n      > */}\n      <Button\n        id={id}\n        variant={buttonVariant}\n        type={buttonType}\n        fullWidth\n        onClick={onClickCb}\n        className={classes.submitButton}\n        color=\"default\"\n        disabled={disableButton}\n        style={buttonStyle}\n      >\n        {loading ? <CircularProgress size={30} /> : buttonText}\n      </Button>\n      {/* </Grid> */}\n    </React.Fragment>\n  );\n};\n","import React from \"react\";\nimport { Grid, makeStyles } from \"@material-ui/core\";\nimport { MMButton } from \"./common/MMButton\";\n\nconst useStyles = makeStyles((theme) => ({\n  gridContainer: {\n    width: \"20%\",\n    margin: \"auto\",\n\n    [theme.breakpoints.up(\"lg\")]: {\n      flexWrap: \"nowrap\",\n      width: \"25%\",\n      margin: \"auto\",\n    },\n    // [theme.breakpoints.down(\"xl\")]: { flexWrap: \"nowrap\" },\n    // [theme.breakpoints.down(\"xl\")]: { width: \"40%\" },\n    // // [theme.breakpoints.down(\"xl\")]: { width: \"30%\" },\n    // [theme.breakpoints.down(\"md\")]: {},\n    // [theme.breakpoints.down(\"sm\")]: {},\n    // [theme.breakpoints.down(\"xs\")]: {},\n  },\n}));\n\nexport const ETLStreamButtons = ({\n  isStartLoading,\n  isStopLoading,\n  isClearLoading,\n  handleOnStart,\n  handleOnStop,\n  handleClearTables,\n}) => {\n  const classes = useStyles();\n  return (\n    <Grid container spacing={3} className={classes.gridContainer}>\n      <Grid item xs>\n        <MMButton\n          buttonText=\"Start\"\n          buttonType=\"primary\"\n          smValue={12}\n          id={\"start\"}\n          disableButton={isStartLoading || isStopLoading || isClearLoading}\n          loading={isStartLoading}\n          onClickCb={handleOnStart}\n          buttonStyle={{ marginRight: \"20px\" }}\n        />\n      </Grid>\n      <Grid item xs>\n        <MMButton\n          buttonText=\"Stop\"\n          buttonType=\"primary\"\n          id={\"stop\"}\n          smValue={12}\n          disableButton={isStartLoading || isStopLoading || isClearLoading}\n          loading={isStopLoading}\n          onClickCb={handleOnStop}\n          buttonStyle={{ marginRight: \"20px\" }}\n        />\n      </Grid>\n      <Grid item xs>\n        <MMButton\n          buttonText=\"Clear\"\n          buttonType=\"primary\"\n          smValue={12}\n          id={\"clear-tables\"}\n          disableButton={isStartLoading || isStopLoading || isClearLoading}\n          loading={isClearLoading}\n          onClickCb={handleClearTables}\n          buttonStyle={{ marginRight: \"20px\" }}\n        />\n      </Grid>\n    </Grid>\n  );\n};\n","import _ from \"lodash\";\nexport const parseMessage = (msg) => {\n  const encodedMessage = JSON.parse(msg).payload;\n  const messageId = JSON.parse(msg).messageId;\n  const decodedMessage = atob(encodedMessage);\n  if (decodedMessage.length === 0) {\n    return { newData: {}, messageId };\n  }\n  const newData = JSON.parse(decodedMessage);\n  return { newData, messageId };\n};\n\nexport const updatedArray = (newMessage, bankClientsTotals, keys, topN) => {\n  let _bankClientsTotals = bankClientsTotals;\n  if (!_.isEmpty(newMessage)) {\n    _bankClientsTotals.push(newMessage);\n  }\n\n  _bankClientsTotals.sort(\n    (totalA, totalB) => totalB.total_amount - totalA.total_amount\n  );\n  let slicedArray = _.uniqBy(_bankClientsTotals, keys);\n  let newArr = [];\n  if (slicedArray.length > topN) {\n    newArr = slicedArray.slice(0, topN);\n  }\n\n  return {\n    updatedBankClientsTotals: newArr,\n  };\n};\n","export const streamNamesArray = [\n  \"etl-bank-totals\",\n  \"etl-bank-txns\",\n  \"etl-bank-txn-publisher\",\n  \"etl-bank-subscriptions\",\n  \"etl-bank-subscriptions-publisher\",\n];\nexport const streamTableNamesArray = [\n  \"etl_bank_category_totals\",\n  \"etl_bank_client_totals\",\n  \"etl_bank_company_totals\",\n  \"etl_bank_subscriptions\",\n  \"etl_bank_transactions\",\n  \"etl_bank_transactions_anonymization\",\n];\n","import jsc8 from \"jsc8\";\nimport { streamTableNamesArray, streamNamesArray } from \"./streamNamesArray\";\n\nconst client = new jsc8({\n  url: process.env.REACT_APP_GDN_URL,\n  apiKey: process.env.REACT_APP_API_KEY,\n  fabricName: process.env.REACT_APP_FABRIC_NAME,\n});\n\nexport const executeRestqlQuery = async (restQlName, bindVars = {}) => {\n  try {\n    const resp = await client.executeRestql(restQlName, bindVars);\n    return resp.result;\n  } catch (error) {\n    console.error(\"error\", error);\n    return [];\n    // throw error;\n  }\n};\nexport const clearTablesData = async () => {\n  try {\n    await Promise.all(\n      streamTableNamesArray.map(async (element) => {\n        await client.collection(element).truncate();\n      })\n    );\n  } catch (error) {\n    console.log(\"the error is\", error);\n  }\n};\n\nexport const startStopStream = async (start) => {\n  try {\n    const streamPromises = [];\n    streamNamesArray.forEach((element) => {\n      streamPromises.push(client.activateStreamApp(element, start));\n    });\n    await Promise.all(streamPromises);\n  } catch (error) {\n    console.log(\"error 502\", error);\n    throw error;\n  }\n};\n\nexport const establishConnection = async (streamName) => {\n  try {\n    const stream = client.stream(streamName, false);\n    const consumerOTP = await stream.getOtp();\n    const _consumer = stream.consumer(\n      `etl-streams-${Math.round(Math.random() * 1000)}`,\n      process.env.REACT_APP_GDN_URL.replace(\"https://\", \"\"),\n      {\n        otp: consumerOTP,\n      }\n    );\n    _consumer.on(\"open\", () => {\n      console.log(`Connection open for _clientConsumer `);\n    });\n    _consumer.on(\"close\", () => {\n      console.log(`Connection close for _clientConsumer `);\n    });\n    return _consumer;\n  } catch (error) {\n    console.error(\"error\", error);\n  }\n};\n\nexport const getBankClientNames = async (queryName) => {\n  let result = [];\n  for (let i = 0; i < 10; i++) {\n    result[i] = executeRestqlQuery(queryName, {\n      offsetValue: i * 100,\n    });\n  }\n\n  const bankClientsResponse = await Promise.all(result);\n  const bankClientNames = bankClientsResponse.reduce(\n    (_bankClientNames, bankClients) => {\n      _bankClientNames.push(...bankClients);\n      return _bankClientNames;\n    },\n    []\n  );\n\n  bankClientNames.sort((a, b) => a.id.localeCompare(b.id));\n  return bankClientNames;\n};\n","import React, {\n  useState,\n  useEffect,\n  useCallback,\n  useMemo,\n  useRef,\n} from \"react\";\n\nimport { ETLCharts } from \"./Charts/ETLCharts\";\nimport { ETLStreamButtons } from \"./ETLStreamButtons\";\nimport _ from \"lodash\";\nimport { parseMessage, updatedArray } from \"../util/helperFunctions\";\nimport {\n  executeRestqlQuery,\n  startStopStream,\n  establishConnection,\n  clearTablesData,\n} from \"../util/services\";\n\nconst streamNameConnectionName = [\n  \"EtlBankClientNameTotalStream\",\n  \"EtlBankCompanyNameTotalStream\",\n  \"EtlBankCategoryNameTotalStream\",\n];\n\nconst ETLDashboard = () => {\n  const [categoriesTotal, setCategoriesTotal] = useState([]);\n  const [clientsTotal, setClientsTotal] = useState([]);\n  const [companyTotal, setCompaniesTotal] = useState([]);\n  const [streamConnections, setStreamConnections] = useState([]);\n  const [isClearLoading, setIsClearLoading] = useState(false);\n  const [isStartLoading, setIsStartLoading] = useState(false);\n  const [isStopLoading, setIsStopLoading] = useState(false);\n  const [topN, setTopN] = useState(7);\n  const setTopNContext = useRef(null);\n  // const [webSocketOpen, setWebSocketOpen] = useState(false);\n\n  useEffect(() => {\n    executeRestqlQuery(\"getBankClientTotals\", {\n      topN: topN,\n    }).then((result) => {\n      setClientsTotal(() => [...result]);\n    });\n  }, [topN]);\n\n  useEffect(() => {\n    executeRestqlQuery(\"getBankCompanyTotals\", {\n      topN: topN,\n    }).then((result) => {\n      setCompaniesTotal(() => [...result]);\n    });\n  }, [topN]);\n\n  useEffect(() => {\n    executeRestqlQuery(\"getBankCategoryTotals\", {\n      topN: topN,\n    }).then(async (result) => {\n      setCategoriesTotal(() => [...result]);\n    });\n  }, [topN]);\n\n  useEffect(() => {\n    setTopNContext.current = topN;\n  }, [topN]);\n\n  const handleClose = (event) => {\n    event.preventDefault();\n    handleOnStop();\n    // This is opening alert message\n    event.returnValue = \"\";\n    return \"\";\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"beforeunload\", handleClose);\n    return () => {\n      window.removeEventListener(\"beforeunload\", handleClose);\n    };\n  }, []);\n\n  const clearTables = useCallback(async () => {\n    await closeWebSocket();\n    await clearTablesData();\n    setIsClearLoading(false);\n    setClientsTotal(() => []);\n    setCategoriesTotal(() => []);\n    setCompaniesTotal(() => []);\n  }, []);\n  const closeWebSocket = useCallback(async () => {\n    for (const elements of streamConnections) {\n      await elements.terminate();\n    }\n    try {\n      await startStopStream(false);\n      setIsStopLoading(false);\n    } catch (error) {\n      console.error(\"error\", error);\n      setIsStopLoading(false);\n    }\n    // setWebSocketOpen(false);\n  }, [streamConnections]);\n\n  const messageManipulation = (msg) => {\n    const { newData } = parseMessage(msg);\n    if (newData.hasOwnProperty(\"client_name\")) {\n      const { updatedBankClientsTotals } = updatedArray(\n        newData,\n        clientsTotal,\n        \"client_name\",\n        setTopNContext.current\n      );\n\n      setClientsTotal(() => [...updatedBankClientsTotals]);\n    } else if (newData.hasOwnProperty(\"product_company\")) {\n      const { updatedBankClientsTotals } = updatedArray(\n        newData,\n        companyTotal,\n        \"product_company\",\n        setTopNContext.current\n      );\n\n      setCompaniesTotal(() => [...updatedBankClientsTotals]);\n    } else if (newData.hasOwnProperty(\"product_category_name\")) {\n      const { updatedBankClientsTotals } = updatedArray(\n        newData,\n        categoriesTotal,\n        \"product_category_name\",\n        setTopNContext.current\n      );\n\n      setCategoriesTotal(() => [...updatedBankClientsTotals]);\n    }\n  };\n\n  const startWebSocket = async () => {\n    try {\n      // setWebSocketOpen(true);\n      await startStopStream(true);\n      let cur = _.cloneDeep(streamConnections);\n      for (let i = 0; i < 3; i++) {\n        cur[i] = await establishConnection(streamNameConnectionName[i]);\n        cur[i].on(\"message\", (msg) => {\n          cur[i].send(JSON.stringify({ messageId: JSON.parse(msg).messageId }));\n\n          messageManipulation(msg);\n        });\n      }\n      setStreamConnections((prev) => {\n        return [...streamConnections, ...cur];\n      });\n      setIsStartLoading(false);\n    } catch (error) {\n      console.error(\"error\", error);\n      setIsStopLoading(false);\n    }\n  };\n\n  const handleTopN = useCallback((event) => {\n    const num = event.target.value.replace(/[^0-9]/g, \"\");\n\n    setClientsTotal([]);\n    setCategoriesTotal([]);\n    setCompaniesTotal([]);\n    setTopN(Number(num));\n  }, []);\n\n  const handleClearAllTables = useCallback(() => {\n    setIsClearLoading(true);\n    clearTables();\n  }, [clearTables]);\n\n  const handleOnStart = () => {\n    setIsStartLoading(true);\n    startWebSocket();\n  };\n\n  const handleOnStop = () => {\n    setIsStopLoading(true);\n    closeWebSocket();\n  };\n\n  const renderCharts = useMemo(() => {\n    return (\n      <ETLCharts\n        handleTopN={handleTopN}\n        topN={topN}\n        clientTotals={clientsTotal}\n        companyTotals={companyTotal}\n        categoryTotals={categoriesTotal}\n        // webSocketOpen={webSocketOpen}\n      />\n    );\n  }, [\n    handleTopN,\n    topN,\n    clientsTotal,\n    // webSocketOpen,\n    companyTotal,\n    categoriesTotal,\n  ]);\n\n  return (\n    <React.Fragment>\n      <ETLStreamButtons\n        handleOnStart={handleOnStart}\n        handleOnStop={handleOnStop}\n        handleClearTables={handleClearAllTables}\n        isStartLoading={isStartLoading}\n        isStopLoading={isStopLoading}\n        isClearLoading={isClearLoading}\n      />\n      {renderCharts}\n    </React.Fragment>\n  );\n};\n\nexport default ETLDashboard;\n","import React from \"react\";\nimport { Grid, Typography, makeStyles } from \"@material-ui/core\";\nimport { MMHeading } from \"../common/MMHeading\";\nimport { MMButton } from \"../common/MMButton\";\n\nconst useStyles = makeStyles(() => ({\n  titleStyle: {\n    fontWeight: \"700\",\n    wordSpacing: \"0.5\",\n    color: \"black\",\n  },\n  content: {\n    textAlign: \"center\",\n    padding: \"20px\",\n  },\n  subtitle: {\n    // maxWeight: \"30%\",\n    width: \"30%\",\n    margin: \"auto\",\n    lineHeight: \"1.2\",\n  },\n}));\n\nexport const ETLHeaderArea = () => {\n  const classes = useStyles();\n  return (\n    <Grid className={classes.content}>\n      <Typography variant=\"h4\" className={classes.titleStyle}>\n        Macrometa Streaming ETL\n      </Typography>\n      <Typography variant=\"h6\" className={classes.subtitle}>\n        Real time ETL with Stream Workers & Query Workers for synthetic bank\n        data\n      </Typography>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { MMButton } from \"../common/MMButton\";\nimport { ETLHeaderArea } from \"./ETLHeaderArea\";\n\nconst ETLHead = () => {\n  return (\n    <React.Fragment>\n      <div style={{ position: \"absolute\", right: \"10px\", top: \"10px\" }}>\n        <MMButton\n          buttonText=\"About\"\n          id={\"about\"}\n          onClickCb={() => {\n            window.open(\n              \"https://github.com/Macrometacorp/demo-realtime-etl/blob/main/README.md\",\n              \"_blank\"\n            );\n          }}\n        />\n      </div>\n      <ETLHeaderArea />\n    </React.Fragment>\n  );\n};\n\nexport default ETLHead;\n","import React from \"react\";\nimport { Grid, Toolbar, makeStyles, lighten } from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport Select from \"react-select\";\n\nconst useToolbarStyles = makeStyles((theme) => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1),\n    maxHeight: \"80px\",\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  highlight:\n    theme.palette.type === \"light\"\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark,\n        },\n  title: {\n    flex: \"1 1 100%\",\n  },\n}));\n\nexport const EnhancedTableToolbar = ({\n  bankClientNames,\n  isLoading,\n  selectedClient,\n  handleSelectClient,\n}) => {\n  const classes = useToolbarStyles();\n  const colourStyles = {\n    control: (styles) => ({ ...styles, backgroundColor: \"white\" }),\n    option: (styles, { data, isDisabled, isFocused, isSelected }) => {\n      // const color = chroma(data.color);\n      return {\n        ...styles,\n        // backgroundColor:\"white\",\n        color: \"rgba(105,105,105,0.6)\",\n        fontFamily: \"Lato\",\n        fontWeight: \"600\",\n        // cursor: isDisabled ? \"not-allowed\" : \"default\",\n      };\n    },\n    placeholder: (defaultStyles) => {\n      const color = \"rgba(105,105,105,0.8)\";\n      const fontFamily = \"Lato\";\n      const fontWeight = \"700\";\n\n      return { ...defaultStyles, color, fontFamily, fontWeight };\n    },\n  };\n\n  return (\n    <Toolbar\n      className={clsx(classes.root)}\n      style={{\n        backgroundColor: \"rgba(51,138,208,0.6)\",\n      }}\n    >\n      <Grid container>\n        <Grid item xs>\n          <Select\n            options={bankClientNames}\n            styles={colourStyles}\n            value={selectedClient}\n            onChange={handleSelectClient}\n            getOptionLabel={(option) => option.label}\n            getOptionValue={(option) => option.id}\n            placeholder={selectedClient ? selectedClient : \"Client Name\"}\n          />\n        </Grid>\n        <Grid\n          item\n          xs={8}\n          // lg={10}\n          // md={8}\n          style={{\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            textAlign: \"center\",\n          }}\n        >\n          <span\n            style={{\n              fontWeight: \"500\",\n              fontSize: \"24px\",\n              fontFamily: \"Lato\",\n              color: \"rgba(0,0,0,0.8)\",\n              marginTop: \"24px\",\n              marginLeft: \"-180px\",\n            }}\n          >\n            Client Data\n          </span>\n        </Grid>\n      </Grid>\n    </Toolbar>\n  );\n};\n","import React from \"react\";\nimport { TableCell, TableHead, TableRow } from \"@material-ui/core\";\n\nexport const EnhancedTableHead = ({ tableType }) => {\n  const headCells = [\n    {\n      id: \"client_name\",\n      numeric: false,\n      disablePadding: true,\n      label: \"Client Name\",\n    },\n    {\n      id: tableType !== \"Subscriptions\" ? \"date\" : \"date_start\",\n      numeric: true,\n      disablePadding: false,\n      label: tableType !== \"Subscriptions\" ? \"Date\" : \"Start Date\",\n    },\n    {\n      id: tableType !== \"Subscriptions\" ? \"txn_id\" : \"date_end\",\n      numeric: true,\n      disablePadding: true,\n      label: tableType !== \"Subscriptions\" ? \"Transaction Id\" : \"End Date\",\n    },\n\n    {\n      id: \"product_category_name\",\n      numeric: true,\n      disablePadding: true,\n      label: \"Product Category Name\",\n    },\n    { id: \"amount\", numeric: true, disablePadding: false, label: \"Amount\" },\n  ];\n  return (\n    <TableHead>\n      <TableRow>\n        {headCells.map((headCell) => (\n          <TableCell\n            key={headCell.id}\n            align={\"center\"}\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\n            style={{\n              fontSize: \"16px\",\n              fontWeight: \"900\",\n              fontFamily: \"Lato\",\n              color: \"rgb(105,105,105)\",\n            }}\n          >\n            {headCell.label}\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n};\n","import React, { useMemo, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  Typography,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TablePagination,\n  TableRow,\n  CircularProgress,\n  Paper,\n} from \"@material-ui/core\";\n\nimport { EnhancedTableToolbar } from \"./EnhancedTableToolbar\";\nimport { EnhancedTableHead } from \"./ETLTableHead\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    // boxShadow: \"2px 5px 5px 2px #d4d4d4\",\n    // borderRadius: \"0.375rem\",\n    // borderTopWidth: 1,\n    \"& .MuiTableCell-root\": {\n      border: \" 1px solid rgba(224, 224, 224, 1)\",\n    },\n  },\n\n  paper: {\n    width: \"100%\",\n\n    marginBottom: theme.spacing(2),\n  },\n  // table: {\n  //   minWidth: 750,\n  // },\n  visuallyHidden: {\n    border: 0,\n    clip: \"rect(0 0 0 0)\",\n    height: 1,\n    margin: -1,\n    overflow: \"hidden\",\n    padding: 0,\n    position: \"absolute\",\n    top: 20,\n    width: 1,\n  },\n}));\n\nexport default function EnhancedTable({\n  bankClientNames,\n  selectedClient,\n  handleSelectClient,\n  tableData,\n  tableType,\n  isLoading,\n}) {\n  const classes = useStyles();\n\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(5);\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const emptyRows =\n    tableData &&\n    tableData.length &&\n    rowsPerPage - Math.min(rowsPerPage, tableData.length - page * rowsPerPage);\n\n  const renderActualTable = useMemo(() => {\n    return (\n      <Paper className={classes.paper}>\n        <EnhancedTableToolbar\n          tableType={tableType}\n          bankClientNames={bankClientNames}\n          selectedClient={selectedClient}\n          handleSelectClient={handleSelectClient}\n          isLoading={isLoading}\n        />\n\n        <TableContainer>\n          <Table\n            // className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={\"medium\"}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead tableType={tableType} />\n            <TableBody>\n              {tableData && tableData.length ? (\n                tableData\n                  .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                  .map((row, index) => {\n                    const labelId = `enhanced-table-checkbox-${index}`;\n\n                    return (\n                      <TableRow\n                        hover\n                        role=\"checkbox\"\n                        tabIndex={-1}\n                        key={row._key}\n                      >\n                        <TableCell\n                          component=\"th\"\n                          id={labelId}\n                          scope=\"row\"\n                          padding=\"none\"\n                          align=\"center\"\n                        >\n                          {row.client_name}\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          {tableType !== \"Subscriptions\"\n                            ? row.date\n                            : row.date_start}\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          {tableType !== \"Subscriptions\"\n                            ? row.txn_id\n                            : row.date_end}\n                        </TableCell>\n                        <TableCell align=\"center\">\n                          {row.product_category_name}\n                        </TableCell>\n                        <TableCell align=\"center\">{row.amount}</TableCell>\n                      </TableRow>\n                    );\n                  })\n              ) : isLoading ? (\n                <TableRow>\n                  <TableCell align=\"center\" colSpan={6}>\n                    <CircularProgress size={30} />\n                  </TableCell>\n                </TableRow>\n              ) : (\n                <TableRow>\n                  <TableCell align=\"center\" colSpan={6}>\n                    <div\n                      style={{\n                        justifyContent: \"center\",\n                        alignContent: \"center\",\n                      }}\n                    >\n                      <Typography\n                        variant=\"h6\"\n                        align=\"center\"\n                        style={{ color: \"rgb(105, 105, 105)\" }}\n                      >\n                        No Data\n                      </Typography>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              )}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: 53 * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <TablePagination\n          rowsPerPageOptions={[5]}\n          component=\"div\"\n          count={tableData && tableData.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n        />\n      </Paper>\n    );\n  }, [\n    emptyRows,\n    bankClientNames,\n    isLoading,\n    classes,\n    handleSelectClient,\n    page,\n    rowsPerPage,\n    selectedClient,\n    tableData,\n    tableType,\n  ]);\n  return (\n    <div className={classes.root} style={{ marginTop: \"2vh\" }}>\n      {renderActualTable}\n    </div>\n  );\n}\n","import React, { useMemo, useEffect, useRef } from \"react\";\nimport Chart from \"chart.js/auto\";\nconst ETLPieChart = ({ chartData }) => {\n  const chartRef = useRef(null);\n  const categoryChartDomRef = useRef(null);\n\n  useEffect(() => {\n    if (chartRef.current) {\n      chartRef.current.data.datasets[0].data = chartData;\n      chartRef.current.update();\n    }\n  }, [chartRef, chartData]);\n\n  useEffect(() => {\n    if (!chartRef.current && categoryChartDomRef.current) {\n      chartRef.current = new Chart(categoryChartDomRef.current, {\n        type: \"pie\",\n\n        data: {\n          labels: [\n            \"Merchant Totals($)\",\n            \"Category Totals($)\",\n            \"Purchaser Totals($)\",\n          ],\n          datasets: [\n            {\n              label: \"Totals\",\n              data: chartData,\n              backgroundColor: [\n                \"rgb(255, 99, 132)\",\n                \"rgb(54, 162, 235)\",\n                \"rgb(255, 205, 86)\",\n              ],\n              hoverOffset: 4,\n            },\n          ],\n        },\n        options: {\n          plugins: {\n            title: {\n              text: \"Totals\",\n              display: true,\n              position: \"bottom\",\n              font: {\n                size: 16,\n                weight: \"bold\",\n              },\n            },\n            legend: {\n              position: \"bottom\",\n            },\n          },\n        },\n      });\n    }\n  }, [chartData]);\n\n  const renderChart = useMemo(() => {\n    return <canvas ref={categoryChartDomRef} />;\n  }, []);\n\n  return <div id=\"chart\">{renderChart}</div>;\n};\n\nexport default ETLPieChart;\n","import { useEffect, useRef } from \"react\";\n\nconst useInterval = (callback, delay) => {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    const tick = () => {\n      savedCallback.current();\n    };\n\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n};\n\nexport default useInterval;\n","import React, { useMemo, useState, useCallback, useEffect } from \"react\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { MMButton } from \"../common/MMButton\";\nimport EnhancedTable from \"./ETLTableComponent\";\nimport ETLPieChart from \"../Charts/ETLPieChart\";\nimport { executeRestqlQuery, getBankClientNames } from \"../../util/services\";\nimport _ from \"lodash\";\nimport useInterval from \"../../hooks/useInterval\";\n\nexport const ETLTable = () => {\n  const [tableData, setTableData] = useState([]);\n  const [selectedClient, setSelectedClient] = useState(\"\");\n  const [bankClientNames, setBankClients] = useState([]);\n  const [anonymousBankClientNames, setAnonymousBankClientNames] = useState([]);\n  const [tableType, setTableType] = useState(\"Transactions\");\n  const [totals, setTotals] = useState([0, 0, 0]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // const offsetValueRef = useRef(null);\n\n  const getAnonymousBankClientName = useCallback(async () => {\n    if (anonymousBankClientNames.length >= 500) {\n      return;\n    }\n\n    const _anonymousBankClientNames = await getBankClientNames(\n      \"getBankAnonymizationClient\"\n    );\n    const sliceArray = _.uniqBy(_anonymousBankClientNames, \"id\");\n    setAnonymousBankClientNames(() => [...sliceArray]);\n  }, [anonymousBankClientNames.length]);\n\n  const getPieChartData = useCallback(async () => {\n    const result = await executeRestqlQuery(\"getTotals\");\n    setTotals(() => [...result]);\n  }, []);\n\n  useEffect(() => {\n    const getBankClients = async () => {\n      const bankClientNames = await getBankClientNames(\"getBankClients\");\n      setBankClients(() => [...bankClientNames]);\n    };\n\n    getBankClients();\n  }, []);\n\n  useEffect(() => {\n    getAnonymousBankClientName();\n  }, [getAnonymousBankClientName]);\n\n  useEffect(() => {\n    getPieChartData();\n  }, [getPieChartData]);\n\n  useInterval(getAnonymousBankClientName, 5000);\n  useInterval(getPieChartData, 30000);\n\n  const getTableData = useCallback(async () => {\n    let result = [];\n    try {\n      switch (tableType) {\n        case \"Transactions\":\n          result = await executeRestqlQuery(\"getBanksTxnsByClient\", {\n            clientName: selectedClient,\n          });\n          break;\n        case \"Subscriptions\":\n          result = await executeRestqlQuery(\"getBankSubscriptionsByClient\", {\n            clientName: selectedClient,\n          });\n          break;\n        case \"Anonymous\":\n          result = await executeRestqlQuery(\"getBankTxnsByAnnonymousClient\", {\n            clientName: selectedClient,\n          });\n          break;\n        default:\n          result = await executeRestqlQuery(\"getBanksTxnsByClient\", {\n            clientName: selectedClient,\n          });\n          break;\n      }\n      setTableData(() => [...result]);\n      setIsLoading(false);\n    } catch (error) {\n      console.error(\"error\", error);\n      setIsLoading(false);\n    }\n  }, [tableType, selectedClient]);\n\n  useEffect(() => {\n    setIsLoading(true);\n    getTableData();\n  }, [tableType, getTableData, selectedClient]);\n\n  const handleTableType = useCallback((name) => {\n    setTableType(name);\n  }, []);\n\n  const handleSelectClient = useCallback((event) => {\n    setSelectedClient(event.id);\n  }, []);\n\n  const renderTableButtons = useMemo(() => {\n    return (\n      <Grid\n        container\n        spacing={1}\n        style={{\n          width: \"40%\",\n          flexWrap: \"nowrap\",\n        }}\n      >\n        <Grid item xs>\n          <MMButton\n            buttonText=\"Transactions\"\n            buttonType=\"primary\"\n            smValue={12}\n            id={\"Transactions\"}\n            // disableButton={isStartLoading || isStopLoading}\n            // loading={isStartLoading}\n            onClickCb={() => handleTableType(\"Transactions\")}\n            buttonStyle={{\n              backgroundColor:\n                tableType === \"Transactions\"\n                  ? \"#338AD0\"\n                  : \"rgba(211,225,240,1)\",\n            }}\n          />\n        </Grid>\n        <Grid item xs>\n          <MMButton\n            buttonText=\"Subscriptions\"\n            buttonType=\"primary\"\n            smValue={12}\n            id={\"Subscriptions\"}\n            // disableButton={isStartLoading || isStopLoading}\n            // loading={isStartLoading}\n            onClickCb={() => handleTableType(\"Subscriptions\")}\n            buttonStyle={{\n              backgroundColor:\n                tableType === \"Subscriptions\"\n                  ? \"#338AD0\"\n                  : \"rgba(211,225,240,1)\",\n            }}\n          />\n        </Grid>\n        <Grid item xs>\n          <MMButton\n            buttonText=\"Anonymous\"\n            buttonType=\"primary\"\n            smValue={12}\n            id={\"Anonymous\"}\n            // disableButton={isStartLoading || isStopLoading}\n            // loading={isStartLoading}\n            onClickCb={() => handleTableType(\"Anonymous\")}\n            buttonStyle={{\n              backgroundColor:\n                tableType === \"Anonymous\" ? \"#338AD0\" : \"rgba(211,225,240,1)\",\n            }}\n          />\n        </Grid>\n      </Grid>\n    );\n  }, [handleTableType, tableType]);\n\n  const renderTable = useMemo(() => {\n    return (\n      <EnhancedTable\n        bankClientNames={\n          tableType === \"Anonymous\" ? anonymousBankClientNames : bankClientNames\n        }\n        selectedClient={selectedClient}\n        handleSelectClient={handleSelectClient}\n        tableData={tableData}\n        tableType={tableType}\n        isLoading={isLoading}\n      />\n    );\n  }, [\n    bankClientNames,\n    anonymousBankClientNames,\n    tableData,\n    tableType,\n    isLoading,\n    selectedClient,\n    handleSelectClient,\n  ]);\n  return (\n    <Grid container spacing={3} style={{ padding: \"3vw\" }}>\n      <Grid item xs={9}>\n        {renderTableButtons}\n        {renderTable}\n      </Grid>\n      <Grid item xs={3}>\n        {_.sum(totals) !== 0 ? (\n          <ETLPieChart chartData={totals} />\n        ) : (\n          <Typography variant=\"h6\" align=\"center\">\n            No Data to show for pie chart\n          </Typography>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport ETLDashboard from \"./components/ETLDashboard\";\nimport ETLHead from \"./components/HeaderArea/ETLHead\";\nimport { ETLTable } from \"./components/Table/ETLTable\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\nconst theme = createMuiTheme({\n  overrides: {\n    MuiFormControl: {\n      root: {\n        height: \"56px\",\n      },\n    },\n    MuiInputBase: {\n      root: {\n        height: \"30px\",\n        width: \"60px\",\n      },\n    },\n    typography: {\n      fontFamily: [\"Lato\", \"sans-serif\"].join(\",\"),\n    },\n    MuiTypography: {\n      h6: {\n        fontSize: \"16px\",\n      },\n    },\n  },\n});\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <ETLHead />\n      <ETLDashboard />\n      <ETLTable />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\nreportWebVitals();\n"],"sourceRoot":""}