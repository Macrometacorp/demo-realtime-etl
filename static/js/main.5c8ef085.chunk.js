(this["webpackJsonpdemo-realtime-etl"]=this["webpackJsonpdemo-realtime-etl"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),i=n.n(c),s=(n(103),n(104),n(11)),o=n(9),l=n.n(o),u=n(20),b=n(7),d=n(16),j=n(210),p=n(213),x=n(214),h=n(229),O=n(207),f=n(212),m=n(2),g=Object(O.a)((function(){return{header:{marginBottom:"2rem",textAlign:"center"},logo:{height:"28px",padding:"1rem 0 2.5rem",width:"auto"}}})),y=function(e){var t=e.title,n=e.justifyValue,a=void 0===n?"center":n,r=e.typographyVariant,c=void 0===r?"h3":r,i=e.gridDirectionValue,s=void 0===i?"row":i,o=e.component,l=void 0===o?"h1":o;g();return Object(m.jsx)(j.a,{container:!0,direction:s,justify:a,alignItems:"flex-start",children:Object(m.jsx)(f.a,{variant:c,component:l,children:t})})},v=n(59),k=function(e){var t=e.chartData,n=e.parserType,r=void 0===n?"":n,c=e.chartText,i=Object(a.useRef)(null),s=Object(a.useRef)(null);Object(a.useEffect)((function(){i.current&&(i.current.data.labels=[],i.current.data.datasets[0].data=t,i.current.update())}),[i,t]),Object(a.useEffect)((function(){if(!i.current&&s.current){var e={xAxisKey:"total_amount",yAxisKey:"client_name"};"companyTotals"===r&&(e.yAxisKey="product_company"),"categoryTotals"===r&&(e.yAxisKey="product_category_name"),i.current=new v.a(s.current,{type:"bar",elements:{bar:{borderWidth:2}},data:{datasets:[{label:"Totals",data:t,backgroundColor:["#338AD0"],borderWidth:1}]},options:{maintainAspectRatio:!0,responsive:!0,indexAxis:"y",parsing:e,spanGaps:!0,showLine:!1,animations:!0,scales:{x:{grid:{display:!1},ticks:{autoSkip:!1}},y:{grid:{display:!1},ticks:{autoSkip:!1}}},plugins:{title:{text:c,position:"bottom",display:!0,font:{size:16,weight:"bold"}},legend:{display:!1}}}})}}),[t,r,c]);var o=Object(a.useMemo)((function(){return Object(m.jsx)("canvas",{ref:s})}),[]);return Object(m.jsx)("div",{id:"chart",style:{height:"auto",width:"auto"},children:o})},C=function(e){var t=e.topN,n=e.handleTopN,r=e.clientTotals,c=e.companyTotals,i=e.categoryTotals,s=e.webSocketOpen,o=Object(a.useMemo)((function(){return Object(m.jsx)(j.a,{item:!0,style:{boxShadow:"2px 5px 5px 2px #d4d4d4",borderRadius:"0.375rem"},children:Object(m.jsx)(p.a,{children:Object(m.jsx)(x.a,{children:Object(m.jsx)(k,{chartData:c,parserType:"companyTotals",chartText:"Company Totals"})})})})}),[c]),l=Object(a.useMemo)((function(){return Object(m.jsx)(j.a,{item:!0,style:{boxShadow:"2px 5px 5px 2px #d4d4d4",borderRadius:"0.375rem"},children:Object(m.jsx)(p.a,{children:Object(m.jsx)(x.a,{children:Object(m.jsx)(k,{chartData:i,parserType:"categoryTotals",chartText:"Category Totals"})})})})}),[i]),u=Object(a.useMemo)((function(){return Object(m.jsx)(j.a,{item:!0,style:{boxShadow:"2px 5px 5px 2px #d4d4d4",borderRadius:"0.375rem"},children:Object(m.jsx)(p.a,{children:Object(m.jsx)(x.a,{children:Object(m.jsx)(k,{chartData:r,parserType:"clientTotals",chartText:"Client Totals"})})})})}),[r]),b=Object(a.useMemo)((function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j.a,{item:!0,children:Object(m.jsx)(y,{title:"TopN",justifyValue:"center",typographyVariant:"h6"})}),Object(m.jsx)(j.a,{item:!0,children:Object(m.jsx)(h.a,{id:"outlined-basic",label:"TopN",variant:"outlined",size:"small",onChange:n,value:t,disabled:s})})]})}),[t,s,n]);return Object(m.jsxs)("div",{style:{marginLeft:"3vw",marginRight:"3vw"},children:[Object(m.jsx)(j.a,{container:!0,direction:"row",justify:"flex-start",style:{paddingTop:"30px"},children:b}),Object(m.jsxs)(j.a,{container:!0,spacing:5,style:{},children:[Object(m.jsx)(j.a,{item:!0,xs:!0,children:u}),Object(m.jsx)(j.a,{item:!0,xs:!0,children:o}),Object(m.jsx)(j.a,{item:!0,xs:!0,children:l})]})]})},S=n(217),T=n(218),w=Object(O.a)((function(){return{submitButton:{textTransform:"capitalize",border:"1px solid #0000006b",backgroundColor:"rgba(211,225,240,1)",color:"black",marginRight:"20px",padding:"10px 0px",fontSize:"18px"}}})),_=function(e){e.directionValue,e.gridStyle,e.justifyValue,e.alignItemsValue;var t=e.buttonVariant,n=void 0===t?"contained":t,a=e.buttonType,c=void 0===a?"submit":a,i=e.onClickCb,s=e.disableButton,o=e.buttonText,l=e.loading,u=(e.smValue,e.buttonStyle),b=void 0===u?{}:u,d=e.id,j=w();return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsx)(S.a,{id:d,variant:n,type:c,fullWidth:!0,onClick:i,className:j.submitButton,color:"default",disabled:s,style:b,children:l?Object(m.jsx)(T.a,{size:30}):o})})},N=function(e){var t=e.isStartLoading,n=e.isStopLoading,a=e.isClearLoading,r=e.handleOnStart,c=e.handleOnStop,i=e.handleClearTables;return Object(m.jsxs)(j.a,{container:!0,spacing:5,style:{width:"30%",margin:"auto"},children:[Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsx)(_,{buttonText:"Start",buttonType:"primary",smValue:12,id:"start",disableButton:t||n||a,loading:t,onClickCb:r,buttonStyle:{marginRight:"20px"}})}),Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsx)(_,{buttonText:"Stop",buttonType:"primary",id:"stop",smValue:12,disableButton:t||n||a,loading:n,onClickCb:c,buttonStyle:{marginRight:"20px"}})}),Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsx)(_,{buttonText:"Clear Tables",buttonType:"primary",smValue:12,id:"clear-tables",disableButton:t||n||a,loading:a,onClickCb:i,buttonStyle:{marginRight:"20px"}})})]})},B=n(35),A=n.n(B),D=function(e,t,n,a){var r=t;A.a.isEmpty(e)||r.push(e),r.sort((function(e,t){return t.total_amount-e.total_amount}));var c=A.a.uniqBy(r,n),i=[];return c.length>a&&(i=c.slice(0,a)),{updatedBankClientsTotals:i}},E=n(88),R=["etl-bank-totals","etl-bank-txns","etl-bank-txn-publisher","etl-bank-subscriptions","etl-bank-subscriptions-publisher"],L=["etl_bank_category_totals","etl_bank_client_totals","etl_bank_company_totals","etl_bank_subscriptions","etl_bank_transactions"],P=new(n.n(E).a)({url:"https://gdn.paas.macrometa.io",apiKey:"stream-etl_macrometa.io.stream_etl_api_key.IxdAQ3xclGbaNut6Ey5S5lsyFr2SYvuI3BpjyvUiko2CQgcrQ68LWRCuGndSdEObb52fb0"}),V=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.prev=1,e.next=4,P.executeRestql(t,n);case 4:return a=e.sent,e.abrupt("return",a.result);case 8:e.prev=8,e.t0=e.catch(1),console.error("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(s.a)(L),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return a=n.value,e.next=7,P.collection(a).truncate();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(s.a)(R),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=16;break}return r=a.value,e.prev=5,e.next=8,P.activateStreamApp(r,t);case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(5),console.log("error 502",e.t0),e.t0;case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(1),n.e(e.t1);case 21:return e.prev=21,n.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24],[5,10]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=P.stream(t,!1),e.next=4,n.getOtp();case 4:return a=e.sent,(r=n.consumer("anurag","gdn.paas.macrometa.io",{otp:a})).on("open",(function(){console.log("Connection open for _clientConsumer ")})),r.on("close",(function(){console.log("Connection close for _clientConsumer ")})),e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.error("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),z=["EtlBankClientNameTotalStream","EtlBankCompanyNameTotalStream","EtlBankCategoryNameTotalStream"],F=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),o=Object(d.a)(i,2),j=o[0],p=o[1],x=Object(a.useState)([]),h=Object(d.a)(x,2),O=h[0],f=h[1],g=Object(a.useState)([]),y=Object(d.a)(g,2),v=y[0],k=y[1],S=Object(a.useState)(!1),T=Object(d.a)(S,2),w=T[0],_=T[1],B=Object(a.useState)(!1),E=Object(d.a)(B,2),R=E[0],L=E[1],P=Object(a.useState)(!1),F=Object(d.a)(P,2),J=F[0],K=F[1],H=Object(a.useState)(10),Q=Object(d.a)(H,2),G=Q[0],Y=Q[1],q=Object(a.useState)(!1),U=Object(d.a)(q,2),X=U[0],Z=U[1];Object(a.useEffect)((function(){V("getBankClientTotals",{topN:G}).then((function(e){p((function(){return Object(b.a)(e)}))}))}),[G]),Object(a.useEffect)((function(){V("getBankCompanyTotals",{topN:G}).then((function(e){f((function(){return Object(b.a)(e)}))}))}),[G]),Object(a.useEffect)((function(){V("getBankCategoryTotals",{topN:G}).then(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c((function(){return Object(b.a)(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[G]);var $=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:_(!1),p((function(){return[]})),c((function(){return[]})),f((function(){return[]}));case 6:case"end":return e.stop()}}),e)}))),[]),ee=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(s.a)(v),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return a=n.value,e.next=7,a.terminate();case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:return e.prev=17,e.next=20,M(!1);case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(17),console.error("error",e.t1),K(!1);case 26:K(!1),Z(!1);case 28:case"end":return e.stop()}}),e,null,[[1,11,14,17],[17,22]])}))),[v]),te=function(e){var t=function(e){var t=JSON.parse(e).payload,n=JSON.parse(e).messageId,a=atob(t);return 0===a.length?{newData:{},messageId:n}:{newData:JSON.parse(a),messageId:n}}(e).newData;if(t.hasOwnProperty("client_name")){var a=D(t,j,"client_name",G).updatedBankClientsTotals;p((function(){return Object(b.a)(a)}))}else if(t.hasOwnProperty("product_company")){var r=D(t,O,"product_company",G).updatedBankClientsTotals;f((function(){return Object(b.a)(r)}))}else if(t.hasOwnProperty("product_category_name")){var i=D(t,n,"product_category_name",G).updatedBankClientsTotals;c((function(){return Object(b.a)(i)}))}},ne=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,M(!0);case 3:t=A.a.cloneDeep(v),n=l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(z[n]);case 2:t[n]=e.sent,t[n].on("message",(function(e){t[n].send(JSON.stringify({messageId:JSON.parse(e).messageId})),te(e)}));case 4:case"end":return e.stop()}}),e)})),a=0;case 6:if(!(a<3)){e.next=11;break}return e.delegateYield(n(a),"t0",8);case 8:a++,e.next=6;break;case 11:k((function(e){return[].concat(Object(b.a)(v),Object(b.a)(t))}));case 12:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=8;break;case 4:e.prev=4,e.t1=e.catch(0),console.error("error",e.t1),K(!1);case 8:L(!1);case 9:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),ae=Object(a.useCallback)((function(e){var t=e.target.value.replace(/[^0-9]/g,"");p([]),c([]),f([]),Y(Number(t))}),[]),re=Object(a.useCallback)((function(){_(!0),$()}),[$]),ce=Object(a.useMemo)((function(){return Object(m.jsx)(C,{handleTopN:ae,topN:G,clientTotals:j,companyTotals:O,categoryTotals:n,webSocketOpen:X})}),[ae,G,j,X,O,n]);return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)(N,{handleOnStart:function(){L(!0),ne()},handleOnStop:function(){K(!0),ee()},handleClearTables:re,isStartLoading:R,isStopLoading:J,isClearLoading:w}),ce]})},J=Object(O.a)((function(){return{titleStyle:{fontWeight:"700",wordSpacing:"0.5"},content:{textAlign:"center",padding:"20px"},subtitle:{width:"30%",margin:"auto",lineHeight:"1.2"}}})),K=function(){var e=J();return Object(m.jsxs)(j.a,{className:e.content,children:[Object(m.jsx)(f.a,{variant:"h4",className:e.titleStyle,children:"Macrometa Streaming ETL"}),Object(m.jsx)(f.a,{variant:"h6",className:e.subtitle,children:"Real time ETL with Stream Workers & Query Workers for synthetic bank data"})]})},H=function(){return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)("div",{style:{position:"absolute",right:"10px",top:"10px"},children:Object(m.jsx)(_,{buttonText:"About",id:"about",onClickCb:function(){window.open("https://github.com/Macrometacorp/demo-realtime-etl/blob/main/README.md","_blank")}})}),Object(m.jsx)(K,{})]})},Q=n(4),G=n(173),Y=n(223),q=n(224),U=n(225),X=n(221),Z=n(222),$=n(228),ee=n(14),te=n(219),ne=n(90),ae=Object(O.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),maxHeight:"80px"},formControl:{margin:e.spacing(1),minWidth:120},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ee.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),re=function(e){var t=e.bankClientNames,n=(e.isLoading,e.selectedClient),a=e.handleSelectClient,r=ae();return Object(m.jsx)(te.a,{className:Object(Q.a)(r.root),style:{backgroundColor:"rgba(51,138,208,0.6)"},children:Object(m.jsxs)(j.a,{container:!0,children:[Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsx)(ne.a,{options:t,value:n,onChange:a,getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.id},placeholder:n||"Client Name"})}),Object(m.jsx)(j.a,{item:!0,xs:10,style:{justifyContent:"center",alignItems:"center",textAlign:"center"},children:Object(m.jsx)("span",{style:{fontWeight:"700",fontSize:"30px",marginLeft:"-180px"},children:"Client Data"})})]})})},ce=n(220),ie=function(e){var t=e.tableType,n=[{id:"client_name",numeric:!1,disablePadding:!0,label:"Client Name"},{id:"Subscriptions"!==t?"date":"date_start",numeric:!0,disablePadding:!1,label:"Subscriptions"!==t?"Date":"Start Date"},{id:"Subscriptions"!==t?"txn_id":"date_end",numeric:!0,disablePadding:!0,label:"Subscriptions"!==t?"Transaction Id":"End Date"},{id:"product_category_name",numeric:!0,disablePadding:!0,label:"Product Category Name"},{id:"amount",numeric:!0,disablePadding:!1,label:"Amount"}];return Object(m.jsx)(ce.a,{children:Object(m.jsx)(X.a,{children:n.map((function(e){return Object(m.jsx)(Z.a,{align:"center",padding:e.disablePadding?"none":"default",style:{fontSize:"18px",fontWeight:"700"},children:e.label},e.id)}))})})},se=Object(O.a)((function(e){return{root:{width:"100%",boxShadow:"2px 5px 5px 2px #d4d4d4",borderRadius:"0.375rem",borderTopWidth:1,"& .MuiTableCell-root":{border:" 1px solid rgba(224, 224, 224, 1)"}},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function oe(e){var t=e.bankClientNames,n=e.selectedClient,r=e.handleSelectClient,c=e.tableData,i=e.tableType,s=e.isLoading,o=se(),l=Object(a.useState)(0),u=Object(d.a)(l,2),b=u[0],j=u[1],p=Object(a.useState)(5),x=Object(d.a)(p,2),h=x[0],O=x[1],g=function(e,t){j(t)},y=function(e){O(parseInt(e.target.value,10)),j(0)},v=c&&c.length&&h-Math.min(h,c.length-b*h),k=Object(a.useMemo)((function(){return Object(m.jsxs)(G.a,{className:o.paper,children:[Object(m.jsx)(re,{tableType:i,bankClientNames:t,selectedClient:n,handleSelectClient:r,isLoading:s}),Object(m.jsx)(Y.a,{style:{minHeight:"280px"},children:Object(m.jsxs)(q.a,{className:o.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table",children:[Object(m.jsx)(ie,{tableType:i}),Object(m.jsxs)(U.a,{children:[c&&c.length?c.slice(b*h,b*h+h).map((function(e,t){var n="enhanced-table-checkbox-".concat(t);return Object(m.jsxs)(X.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(m.jsx)(Z.a,{component:"th",id:n,scope:"row",padding:"none",align:"center",children:e.client_name}),Object(m.jsx)(Z.a,{align:"center",children:"Subscriptions"!==i?e.date:e.date_start}),Object(m.jsx)(Z.a,{align:"center",children:"Subscriptions"!==i?e.txn_id:e.date_end}),Object(m.jsx)(Z.a,{align:"center",children:e.product_category_name}),Object(m.jsx)(Z.a,{align:"center",children:e.amount})]},e._key)})):s?Object(m.jsx)(X.a,{children:Object(m.jsx)(Z.a,{align:"center",colSpan:6,children:Object(m.jsx)(T.a,{size:30})})}):Object(m.jsx)(X.a,{children:Object(m.jsx)(Z.a,{align:"center",colSpan:6,children:Object(m.jsx)("div",{style:{justifyContent:"center",alignContent:"center"},children:Object(m.jsx)(f.a,{className:Object(Q.a)(o.content),variant:"h4",align:"center",children:"No Data"})})})}),v>0&&Object(m.jsx)(X.a,{style:{height:53*v},children:Object(m.jsx)(Z.a,{colSpan:6})})]})]})}),Object(m.jsx)($.a,{rowsPerPageOptions:[5,10],component:"div",count:c&&c.length,rowsPerPage:h,page:b,onChangePage:g,onChangeRowsPerPage:y})]})}),[v,t,s,o,r,b,h,n,c,i]);return Object(m.jsx)("div",{className:o.root,style:{marginTop:"2vh"},children:k})}var le=function(e){var t=e.chartData,n=Object(a.useRef)(null),r=Object(a.useRef)(null);Object(a.useEffect)((function(){n.current&&(n.current.data.datasets[0].data=t,n.current.update())}),[n,t]),Object(a.useEffect)((function(){!n.current&&r.current&&(n.current=new v.a(r.current,{type:"pie",data:{labels:["Company","Category","Client"],datasets:[{label:"Totals",data:t,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)"],hoverOffset:4}]},options:{plugins:{title:{text:"Totals",display:!0,position:"bottom",font:{size:16,weight:"bold"}},legend:{position:"bottom"}}}}))}),[t]);var c=Object(a.useMemo)((function(){return Object(m.jsx)("canvas",{ref:r})}),[]);return Object(m.jsx)("div",{id:"chart",children:c})},ue=function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},be=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(d.a)(c,2),s=i[0],o=i[1],h=Object(a.useState)([]),O=Object(d.a)(h,2),g=O[0],y=O[1],v=Object(a.useState)([]),k=Object(d.a)(v,2),C=k[0],S=k[1],T=Object(a.useState)("Transactions"),w=Object(d.a)(T,2),N=w[0],B=w[1],D=Object(a.useState)([0,0,0]),E=Object(d.a)(D,2),R=E[0],L=E[1],P=Object(a.useState)(!1),I=Object(d.a)(P,2),M=I[0],W=I[1],z=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t,n,a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],a=1;case 2:if(!(a<=10)){e.next=15;break}return r=[],c=[],e.next=6,V("getBankClients",{offsetValue:100*a});case 6:return r=e.sent,e.next=9,V("getBankAnonymizationClient",{offsetValue:100*a});case 9:c=e.sent,t=[].concat(Object(b.a)(t),Object(b.a)(r)),n=[].concat(Object(b.a)(n),Object(b.a)(c));case 12:a++,e.next=2;break;case 15:t.sort((function(e,t){return e.id.localeCompare(t.id)})),n.sort((function(e,t){return e.id.localeCompare(t.id)})),y((function(){return Object(b.a)(t)})),S((function(){return Object(b.a)(n)}));case 19:case"end":return e.stop()}}),e)}))),[]),F=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("getTotals");case 2:t=e.sent,L((function(){return Object(b.a)(t)}));case 4:case"end":return e.stop()}}),e)}))),[]);Object(a.useEffect)((function(){z()}),[z]),Object(a.useEffect)((function(){F()}),[F]),ue(F,3e4);var J=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],e.t0=N,e.next="Transactions"===e.t0?4:"Subscriptions"===e.t0?8:"Anonymous"===e.t0?12:16;break;case 4:return e.next=6,V("getBanksTxnsByClient",{clientName:s});case 6:return t=e.sent,e.abrupt("break",20);case 8:return e.next=10,V("getBankSubscriptionsByClient",{clientName:s});case 10:return t=e.sent,e.abrupt("break",20);case 12:return e.next=14,V("getBankTxnsByAnnonymousClient",{clientName:s});case 14:return t=e.sent,e.abrupt("break",20);case 16:return e.next=18,V("getBanksTxnsByClient",{clientName:s});case 18:return t=e.sent,e.abrupt("break",20);case 20:r((function(){return Object(b.a)(t)})),W(!1);case 22:case"end":return e.stop()}}),e)}))),[N,s]);Object(a.useEffect)((function(){W(!0),J()}),[N,J,s]);var K=Object(a.useCallback)((function(e){B(e)}),[]),H=Object(a.useCallback)((function(e){o(e.id)}),[]),Q=Object(a.useMemo)((function(){return Object(m.jsxs)(j.a,{container:!0,spacing:2,style:{width:"40%"},children:[Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsx)(_,{buttonText:"Transactions",buttonType:"primary",smValue:12,id:"Transactions",onClickCb:function(){return K("Transactions")},buttonStyle:{backgroundColor:"Transactions"===N?"#338AD0":"rgba(211,225,240,1)"}})}),Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsx)(_,{buttonText:"Subscriptions",buttonType:"primary",smValue:12,id:"Subscriptions",onClickCb:function(){return K("Subscriptions")},buttonStyle:{backgroundColor:"Subscriptions"===N?"#338AD0":"rgba(211,225,240,1)"}})}),Object(m.jsx)(j.a,{item:!0,xs:!0,children:Object(m.jsx)(_,{buttonText:"Anonymous",buttonType:"primary",smValue:12,id:"Anonymous",onClickCb:function(){return K("Anonymous")},buttonStyle:{backgroundColor:"Anonymous"===N?"#338AD0":"rgba(211,225,240,1)"}})})]})}),[K,N]),G=Object(a.useMemo)((function(){return Object(m.jsx)(oe,{bankClientNames:"Anonymous"===N?C:g,selectedClient:s,handleSelectClient:H,tableData:n,tableType:N,isLoading:M})}),[g,C,n,N,M,s,H]);return Object(m.jsxs)(j.a,{container:!0,spacing:3,style:{padding:"3vw"},children:[Object(m.jsxs)(j.a,{item:!0,xs:9,children:[Q,G]}),Object(m.jsx)(j.a,{item:!0,xs:3,style:{paddingTop:"60px"},children:Object(m.jsx)(p.a,{children:Object(m.jsx)(x.a,{children:0!==A.a.sum(R)?Object(m.jsx)(le,{chartData:R}):Object(m.jsx)(f.a,{variant:"h6",align:"center",children:"No Data to show pie chart"})})})})]})},de=n(89),je=n(226),pe=Object(de.a)({overrides:{MuiFormControl:{root:{height:"56px"}},MuiInputBase:{root:{height:"30px",width:"60px"}}}});var xe=function(){return Object(m.jsxs)(je.a,{theme:pe,children:[Object(m.jsx)(H,{}),Object(m.jsx)(F,{}),Object(m.jsx)(be,{})]})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,231)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(xe,{})}),document.getElementById("root")),he()}},[[172,1,2]]]);
//# sourceMappingURL=main.5c8ef085.chunk.js.map