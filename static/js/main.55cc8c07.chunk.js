(this["webpackJsonpdemo-realtime-etl"]=this["webpackJsonpdemo-realtime-etl"]||[]).push([[0],{104:function(t,e,n){},105:function(t,e,n){},173:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(12),i=n.n(c),o=(n(104),n(105),n(11)),s=n(7),l=n.n(s),u=n(21),b=n(8),d=n(16),p=n(211),j=n(229),f=n(208),h=n(213),m=n(2),O=Object(f.a)((function(){return{header:{marginBottom:"2rem",textAlign:"center"},logo:{height:"28px",padding:"1rem 0 2.5rem",width:"auto"}}})),g=function(t){var e=t.title,n=t.justifyValue,a=void 0===n?"center":n,r=t.typographyVariant,c=void 0===r?"h3":r,i=t.gridDirectionValue,o=void 0===i?"row":i,s=t.component,l=void 0===s?"h1":s;O();return Object(m.jsx)(p.a,{container:!0,direction:o,justify:a,alignItems:"flex-start",children:Object(m.jsx)(h.a,{variant:c,component:l,children:e})})},x=n(61),y=function(t){var e=t.chartData,n=t.parserType,r=void 0===n?"":n,c=t.chartText,i=Object(a.useRef)(null),o=Object(a.useRef)(null);Object(a.useEffect)((function(){i.current&&(i.current.data.labels=[],i.current.data.datasets[0].data=e,i.current.update())}),[i,e]),Object(a.useEffect)((function(){if(!i.current&&o.current){var t={xAxisKey:"total_amount",yAxisKey:"client_name"};"companyTotals"===r&&(t.yAxisKey="product_company"),"categoryTotals"===r&&(t.yAxisKey="product_category_name"),o.current.setAttribute("height","200%"),i.current=new x.a(o.current,{type:"bar",elements:{bar:{}},data:{datasets:[{label:"Totals",data:e,backgroundColor:["#338AD0"]}]},options:{maintainAspectRatio:!0,responsive:!0,indexAxis:"y",parsing:t,animations:!0,scales:{x:{grid:{display:!1},ticks:{autoSkip:!1}},y:{grid:{display:!1},ticks:{autoSkip:!1},font:{weight:"bold"}}},plugins:{title:{text:c,position:"bottom",display:!0,font:{size:16,weight:"bold"}},legend:{display:!1}}}})}}),[e,r,c]);var s=Object(a.useMemo)((function(){return Object(m.jsx)("canvas",{ref:o})}),[]);return Object(m.jsx)("div",{id:"chart",style:{height:"1200px !important"},children:s})},v=function(t){var e=t.topN,n=t.handleTopN,r=t.clientTotals,c=t.companyTotals,i=t.categoryTotals,o=Object(a.useMemo)((function(){return Object(m.jsx)(p.a,{item:!0,children:Object(m.jsx)(y,{chartData:c,parserType:"companyTotals",chartText:"Company Totals"})})}),[c]),s=Object(a.useMemo)((function(){return Object(m.jsx)(p.a,{item:!0,children:Object(m.jsx)(y,{chartData:i,parserType:"categoryTotals",chartText:"Category Totals"})})}),[i]),l=Object(a.useMemo)((function(){return Object(m.jsx)(y,{chartData:r,parserType:"clientTotals",chartText:"Client Totals"})}),[r]),u=Object(a.useMemo)((function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p.a,{item:!0,children:Object(m.jsx)(g,{title:"TopN",justifyValue:"center",typographyVariant:"h6"})}),Object(m.jsx)(p.a,{item:!0,children:Object(m.jsx)(j.a,{id:"outlined-basic",label:"TopN",variant:"outlined",size:"small",onChange:n,value:e})})]})}),[e,n]);return Object(m.jsxs)("div",{style:{marginLeft:"3vw",marginRight:"3vw"},children:[Object(m.jsx)(p.a,{container:!0,direction:"row",justify:"flex-start",style:{paddingTop:"30px"},children:u}),Object(m.jsxs)(p.a,{container:!0,spacing:5,style:{height:"400px"},children:[Object(m.jsx)(p.a,{item:!0,xs:4,children:l}),Object(m.jsx)(p.a,{item:!0,xs:4,children:o}),Object(m.jsx)(p.a,{item:!0,xs:4,children:s})]})]})},k=n(217),C=n(218),T=Object(f.a)((function(){return{submitButton:{textTransform:"capitalize",backgroundColor:"rgba(211,225,240,1)",marginRight:"20px",width:"100%",fontFamily:"Lato",fontWeight:"900",color:"rgba(0,0,0,1)",fontSize:"16px"}}})),S=function(t){t.directionValue,t.gridStyle,t.justifyValue,t.alignItemsValue;var e=t.buttonVariant,n=void 0===e?"contained":e,a=t.buttonType,c=void 0===a?"submit":a,i=t.onClickCb,o=t.disableButton,s=t.buttonText,l=t.loading,u=(t.smValue,t.buttonStyle),b=void 0===u?{}:u,d=t.id,p=T();return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsx)(k.a,{id:d,variant:n,type:c,fullWidth:!0,onClick:i,className:p.submitButton,color:"default",disabled:o,style:b,children:l?Object(m.jsx)(C.a,{size:30}):s})})},w=function(t){var e=t.isStartLoading,n=t.isStopLoading,a=t.isClearLoading,r=t.handleOnStart,c=t.handleOnStop,i=t.handleClearTables;return Object(m.jsxs)(p.a,{container:!0,spacing:3,style:{width:"20%",margin:"auto"},children:[Object(m.jsx)(p.a,{item:!0,xs:!0,children:Object(m.jsx)(S,{buttonText:"Start",buttonType:"primary",smValue:12,id:"start",disableButton:e||n||a,loading:e,onClickCb:r,buttonStyle:{marginRight:"20px"}})}),Object(m.jsx)(p.a,{item:!0,xs:!0,children:Object(m.jsx)(S,{buttonText:"Stop",buttonType:"primary",id:"stop",smValue:12,disableButton:e||n||a,loading:n,onClickCb:c,buttonStyle:{marginRight:"20px"}})}),Object(m.jsx)(p.a,{item:!0,xs:!0,children:Object(m.jsx)(S,{buttonText:"Clear",buttonType:"primary",smValue:12,id:"clear-tables",disableButton:e||n||a,loading:a,onClickCb:i,buttonStyle:{marginRight:"20px"}})})]})},_=n(37),N=n.n(_),B=function(t,e,n,a){var r=e;N.a.isEmpty(t)||r.push(t),r.sort((function(t,e){return e.total_amount-t.total_amount}));var c=N.a.uniqBy(r,n),i=[];return c.length>a&&(i=c.slice(0,a)),{updatedBankClientsTotals:i}},A=n(90),D=["etl-bank-totals","etl-bank-txns","etl-bank-txn-publisher","etl-bank-subscriptions","etl-bank-subscriptions-publisher"],L=["etl_bank_category_totals","etl_bank_client_totals","etl_bank_company_totals","etl_bank_subscriptions","etl_bank_transactions","etl_bank_transactions_anonymization"],E=new(n.n(A).a)({url:"https://gdn.paas.macrometa.io",apiKey:"stream-etl_macrometa.io.stream_etl_api_key.IxdAQ3xclGbaNut6Ey5S5lsyFr2SYvuI3BpjyvUiko2CQgcrQ68LWRCuGndSdEObb52fb0"}),P=function(){var t=Object(u.a)(l.a.mark((function t(e){var n,a,r=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t.prev=1,t.next=4,E.executeRestql(e,n);case 4:return a=t.sent,t.abrupt("return",a.result);case 8:t.prev=8,t.t0=t.catch(1),console.error("error",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(L.map(function(){var t=Object(u.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.collection(e).truncate();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Object(u.a)(l.a.mark((function t(e){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(o.a)(D),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=16;break}return r=a.value,t.prev=5,t.next=8,E.activateStreamApp(r,e);case 8:t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(5),console.log("error 502",t.t0),t.t0;case 14:t.next=3;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(1),n.e(t.t1);case 21:return t.prev=21,n.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[1,18,21,24],[5,10]])})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(u.a)(l.a.mark((function t(e){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=E.stream(e,!1),t.next=4,n.getOtp();case 4:return a=t.sent,(r=n.consumer("anurag","gdn.paas.macrometa.io",{otp:a})).on("open",(function(){console.log("Connection open for _clientConsumer ")})),r.on("close",(function(){console.log("Connection close for _clientConsumer ")})),t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(0),console.error("error",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),R=["EtlBankClientNameTotalStream","EtlBankCompanyNameTotalStream","EtlBankCategoryNameTotalStream"],F=function(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],c=e[1],i=Object(a.useState)([]),s=Object(d.a)(i,2),p=s[0],j=s[1],f=Object(a.useState)([]),h=Object(d.a)(f,2),O=h[0],g=h[1],x=Object(a.useState)([]),y=Object(d.a)(x,2),k=y[0],C=y[1],T=Object(a.useState)(!1),S=Object(d.a)(T,2),_=S[0],A=S[1],D=Object(a.useState)(!1),L=Object(d.a)(D,2),E=L[0],F=L[1],z=Object(a.useState)(!1),W=Object(d.a)(z,2),J=W[0],K=W[1],H=Object(a.useState)(10),Q=Object(d.a)(H,2),Y=Q[0],q=Q[1];Object(a.useEffect)((function(){P("getBankClientTotals",{topN:Y}).then((function(t){j((function(){return Object(b.a)(t)}))}))}),[Y]),Object(a.useEffect)((function(){P("getBankCompanyTotals",{topN:Y}).then((function(t){g((function(){return Object(b.a)(t)}))}))}),[Y]),Object(a.useEffect)((function(){P("getBankCategoryTotals",{topN:Y}).then(function(){var t=Object(u.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c((function(){return Object(b.a)(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[Y]);var G=Object(a.useCallback)(Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:return t.next=4,M();case 4:A(!1),j((function(){return[]})),c((function(){return[]})),g((function(){return[]}));case 8:case"end":return t.stop()}}),t)}))),[]),U=Object(a.useCallback)(Object(u.a)(l.a.mark((function t(){var e,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Object(o.a)(k),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return a=n.value,t.next=7,a.terminate();case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:return t.prev=17,t.next=20,V(!1);case 20:t.next=26;break;case 22:t.prev=22,t.t1=t.catch(17),console.error("error",t.t1),K(!1);case 26:K(!1);case 27:case"end":return t.stop()}}),t,null,[[1,11,14,17],[17,22]])}))),[k]),X=function(t){var e=function(t){var e=JSON.parse(t).payload,n=JSON.parse(t).messageId,a=atob(e);return 0===a.length?{newData:{},messageId:n}:{newData:JSON.parse(a),messageId:n}}(t).newData;if(e.hasOwnProperty("client_name")){var a=B(e,p,"client_name",Y).updatedBankClientsTotals;j((function(){return Object(b.a)(a)}))}else if(e.hasOwnProperty("product_company")){var r=B(e,O,"product_company",Y).updatedBankClientsTotals;g((function(){return Object(b.a)(r)}))}else if(e.hasOwnProperty("product_category_name")){var i=B(e,n,"product_category_name",Y).updatedBankClientsTotals;c((function(){return Object(b.a)(i)}))}},Z=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(l.a.mark((function t(){var e,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(!0);case 2:e=N.a.cloneDeep(k),n=l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(R[n]);case 2:e[n]=t.sent,e[n].on("message",(function(t){e[n].send(JSON.stringify({messageId:JSON.parse(t).messageId})),X(t)}));case 4:case"end":return t.stop()}}),t)})),a=0;case 5:if(!(a<3)){t.next=10;break}return t.delegateYield(n(a),"t0",7);case 7:a++,t.next=5;break;case 10:C((function(t){return[].concat(Object(b.a)(k),Object(b.a)(e))}));case 11:case"end":return t.stop()}}),t)}))(),"t0",2);case 2:t.next=8;break;case 4:t.prev=4,t.t1=t.catch(0),console.error("error",t.t1),K(!1);case 8:F(!1);case 9:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(){return t.apply(this,arguments)}}(),$=Object(a.useCallback)((function(t){var e=t.target.value.replace(/[^0-9]/g,"");j([]),c([]),g([]),q(Number(e))}),[]),tt=Object(a.useCallback)((function(){A(!0),G()}),[G]),et=Object(a.useMemo)((function(){return Object(m.jsx)(v,{handleTopN:$,topN:Y,clientTotals:p,companyTotals:O,categoryTotals:n})}),[$,Y,p,O,n]);return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)(w,{handleOnStart:function(){F(!0),Z()},handleOnStop:function(){K(!0),U()},handleClearTables:tt,isStartLoading:E,isStopLoading:J,isClearLoading:_}),et]})},z=Object(f.a)((function(){return{titleStyle:{fontWeight:"700",wordSpacing:"0.5",color:"black"},content:{textAlign:"center",padding:"20px"},subtitle:{width:"30%",margin:"auto",lineHeight:"1.2"}}})),W=function(){var t=z();return Object(m.jsxs)(p.a,{className:t.content,children:[Object(m.jsx)(h.a,{variant:"h4",className:t.titleStyle,children:"Macrometa Streaming ETL"}),Object(m.jsx)(h.a,{variant:"h6",className:t.subtitle,children:"Real time ETL with Stream Workers & Query Workers for synthetic bank data"})]})},J=function(){return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)("div",{style:{position:"absolute",right:"10px",top:"10px"},children:Object(m.jsx)(S,{buttonText:"About",id:"about",onClickCb:function(){window.open("https://github.com/Macrometacorp/demo-realtime-etl/blob/main/README.md","_blank")}})}),Object(m.jsx)(W,{})]})},K=n(4),H=n(216),Q=n(223),Y=n(224),q=n(225),G=n(221),U=n(222),X=n(228),Z=n(23),$=n(14),tt=n(219),et=n(92),nt=Object(f.a)((function(t){return{root:{paddingLeft:t.spacing(2),paddingRight:t.spacing(1),maxHeight:"80px"},formControl:{margin:t.spacing(1),minWidth:120},highlight:"light"===t.palette.type?{color:t.palette.secondary.main,backgroundColor:Object($.d)(t.palette.secondary.light,.85)}:{color:t.palette.text.primary,backgroundColor:t.palette.secondary.dark},title:{flex:"1 1 100%"}}})),at=function(t){var e=t.bankClientNames,n=(t.isLoading,t.selectedClient),a=t.handleSelectClient,r=nt(),c={control:function(t){return Object(Z.a)(Object(Z.a)({},t),{},{backgroundColor:"white"})},option:function(t,e){e.data,e.isDisabled,e.isFocused,e.isSelected;return Object(Z.a)(Object(Z.a)({},t),{},{color:"rgba(105,105,105,0.8)",fontFamily:"Lato",fontWeight:"700"})},placeholder:function(t){return Object(Z.a)(Object(Z.a)({},t),{},{color:"rgba(105,105,105,0.8)",fontFamily:"Lato",fontWeight:"700"})}};return Object(m.jsx)(tt.a,{className:Object(K.a)(r.root),style:{backgroundColor:"rgba(51,138,208,0.6)"},children:Object(m.jsxs)(p.a,{container:!0,children:[Object(m.jsx)(p.a,{item:!0,xs:!0,children:Object(m.jsx)(et.a,{options:e,styles:c,value:n,onChange:a,getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.id},placeholder:n||"Client Name"})}),Object(m.jsx)(p.a,{item:!0,xs:10,style:{justifyContent:"center",alignItems:"center",textAlign:"center"},children:Object(m.jsx)("span",{style:{fontWeight:"500",fontSize:"24px",fontFamily:"Lato",color:"rgba(0,0,0,0.8)",marginTop:"24px",marginLeft:"-180px"},children:"Client Data"})})]})})},rt=n(220),ct=function(t){var e=t.tableType,n=[{id:"client_name",numeric:!1,disablePadding:!0,label:"Client Name"},{id:"Subscriptions"!==e?"date":"date_start",numeric:!0,disablePadding:!1,label:"Subscriptions"!==e?"Date":"Start Date"},{id:"Subscriptions"!==e?"txn_id":"date_end",numeric:!0,disablePadding:!0,label:"Subscriptions"!==e?"Transaction Id":"End Date"},{id:"product_category_name",numeric:!0,disablePadding:!0,label:"Product Category Name"},{id:"amount",numeric:!0,disablePadding:!1,label:"Amount"}];return Object(m.jsx)(rt.a,{children:Object(m.jsx)(G.a,{children:n.map((function(t){return Object(m.jsx)(U.a,{align:"center",padding:t.disablePadding?"none":"default",style:{fontSize:"16px",fontWeight:"900",fontFamily:"Lato",color:"rgb(105,105,105)"},children:t.label},t.id)}))})})},it=Object(f.a)((function(t){return{root:{width:"100%","& .MuiTableCell-root":{border:" 1px solid rgba(224, 224, 224, 1)"}},paper:{width:"100%",marginBottom:t.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ot(t){var e=t.bankClientNames,n=t.selectedClient,r=t.handleSelectClient,c=t.tableData,i=t.tableType,o=t.isLoading,s=it(),l=Object(a.useState)(0),u=Object(d.a)(l,2),b=u[0],p=u[1],j=Object(a.useState)(5),f=Object(d.a)(j,2),O=f[0],g=f[1],x=function(t,e){p(e)},y=function(t){g(parseInt(t.target.value,10)),p(0)},v=c&&c.length&&O-Math.min(O,c.length-b*O),k=Object(a.useMemo)((function(){return Object(m.jsxs)(H.a,{className:s.paper,children:[Object(m.jsx)(at,{tableType:i,bankClientNames:e,selectedClient:n,handleSelectClient:r,isLoading:o}),Object(m.jsx)(Q.a,{style:{minHeight:"280px"},children:Object(m.jsxs)(Y.a,{className:s.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table",children:[Object(m.jsx)(ct,{tableType:i}),Object(m.jsxs)(q.a,{children:[c&&c.length?c.slice(b*O,b*O+O).map((function(t,e){var n="enhanced-table-checkbox-".concat(e);return Object(m.jsxs)(G.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(m.jsx)(U.a,{component:"th",id:n,scope:"row",padding:"none",align:"center",children:t.client_name}),Object(m.jsx)(U.a,{align:"center",children:"Subscriptions"!==i?t.date:t.date_start}),Object(m.jsx)(U.a,{align:"center",children:"Subscriptions"!==i?t.txn_id:t.date_end}),Object(m.jsx)(U.a,{align:"center",children:t.product_category_name}),Object(m.jsx)(U.a,{align:"center",children:t.amount})]},t._key)})):o?Object(m.jsx)(G.a,{children:Object(m.jsx)(U.a,{align:"center",colSpan:6,children:Object(m.jsx)(C.a,{size:30})})}):Object(m.jsx)(G.a,{children:Object(m.jsx)(U.a,{align:"center",colSpan:6,children:Object(m.jsx)("div",{style:{justifyContent:"center",alignContent:"center"},children:Object(m.jsx)(h.a,{variant:"h6",align:"center",style:{color:"rgb(105, 105, 105)"},children:"No Data"})})})}),v>0&&Object(m.jsx)(G.a,{style:{height:53*v},children:Object(m.jsx)(U.a,{colSpan:6})})]})]})}),Object(m.jsx)(X.a,{rowsPerPageOptions:[5,10],component:"div",count:c&&c.length,rowsPerPage:O,page:b,onChangePage:x,onChangeRowsPerPage:y})]})}),[v,e,o,s,r,b,O,n,c,i]);return Object(m.jsx)("div",{className:s.root,style:{marginTop:"2vh"},children:k})}var st=function(t){var e=t.chartData,n=Object(a.useRef)(null),r=Object(a.useRef)(null);Object(a.useEffect)((function(){n.current&&(n.current.data.datasets[0].data=e,n.current.update())}),[n,e]),Object(a.useEffect)((function(){!n.current&&r.current&&(n.current=new x.a(r.current,{type:"pie",data:{labels:["Company","Category","Client"],datasets:[{label:"Totals",data:e,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)"],hoverOffset:4}]},options:{plugins:{title:{text:"Totals",display:!0,position:"bottom",font:{size:16,weight:"bold"}},legend:{position:"bottom"}}}}))}),[e]);var c=Object(a.useMemo)((function(){return Object(m.jsx)("canvas",{ref:r})}),[]);return Object(m.jsx)("div",{id:"chart",children:c})},lt=function(t,e){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=t}),[t]),Object(a.useEffect)((function(){if(null!==e){var t=setInterval((function(){n.current()}),e);return function(){return clearInterval(t)}}}),[e])},ut=function(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(""),i=Object(d.a)(c,2),o=i[0],s=i[1],j=Object(a.useState)([]),f=Object(d.a)(j,2),O=f[0],g=f[1],x=Object(a.useState)([]),y=Object(d.a)(x,2),v=y[0],k=y[1],C=Object(a.useState)("Transactions"),T=Object(d.a)(C,2),w=T[0],_=T[1],B=Object(a.useState)([0,0,0]),A=Object(d.a)(B,2),D=A[0],L=A[1],E=Object(a.useState)(!1),M=Object(d.a)(E,2),V=M[0],I=M[1],R=Object(a.useCallback)(Object(u.a)(l.a.mark((function t(){var e,n,a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],n=[],a=1;case 2:if(!(a<=10)){t.next=15;break}return r=[],c=[],t.next=6,P("getBankClients",{offsetValue:100*a});case 6:return r=t.sent,t.next=9,P("getBankAnonymizationClient",{offsetValue:100*a});case 9:c=t.sent,e=[].concat(Object(b.a)(e),Object(b.a)(r)),n=[].concat(Object(b.a)(n),Object(b.a)(c));case 12:a++,t.next=2;break;case 15:e.sort((function(t,e){return t.id.localeCompare(e.id)})),n.sort((function(t,e){return t.id.localeCompare(e.id)})),g((function(){return Object(b.a)(e)})),k((function(){return Object(b.a)(n)}));case 19:case"end":return t.stop()}}),t)}))),[]),F=Object(a.useCallback)(Object(u.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P("getTotals");case 2:e=t.sent,L((function(){return Object(b.a)(e)}));case 4:case"end":return t.stop()}}),t)}))),[]);Object(a.useEffect)((function(){R()}),[R]),Object(a.useEffect)((function(){F()}),[F]),lt(F,3e4);var z=Object(a.useCallback)(Object(u.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],t.t0=w,t.next="Transactions"===t.t0?4:"Subscriptions"===t.t0?8:"Anonymous"===t.t0?12:16;break;case 4:return t.next=6,P("getBanksTxnsByClient",{clientName:o});case 6:return e=t.sent,t.abrupt("break",20);case 8:return t.next=10,P("getBankSubscriptionsByClient",{clientName:o});case 10:return e=t.sent,t.abrupt("break",20);case 12:return t.next=14,P("getBankTxnsByAnnonymousClient",{clientName:o});case 14:return e=t.sent,t.abrupt("break",20);case 16:return t.next=18,P("getBanksTxnsByClient",{clientName:o});case 18:return e=t.sent,t.abrupt("break",20);case 20:r((function(){return Object(b.a)(e)})),I(!1);case 22:case"end":return t.stop()}}),t)}))),[w,o]);Object(a.useEffect)((function(){I(!0),z()}),[w,z,o]);var W=Object(a.useCallback)((function(t){_(t)}),[]),J=Object(a.useCallback)((function(t){s(t.id)}),[]),K=Object(a.useMemo)((function(){return Object(m.jsxs)(p.a,{container:!0,spacing:1,style:{width:"40%"},children:[Object(m.jsx)(p.a,{item:!0,xs:!0,children:Object(m.jsx)(S,{buttonText:"Transactions",buttonType:"primary",smValue:12,id:"Transactions",onClickCb:function(){return W("Transactions")},buttonStyle:{backgroundColor:"Transactions"===w?"#338AD0":"rgba(211,225,240,1)"}})}),Object(m.jsx)(p.a,{item:!0,xs:!0,children:Object(m.jsx)(S,{buttonText:"Subscriptions",buttonType:"primary",smValue:12,id:"Subscriptions",onClickCb:function(){return W("Subscriptions")},buttonStyle:{backgroundColor:"Subscriptions"===w?"#338AD0":"rgba(211,225,240,1)"}})}),Object(m.jsx)(p.a,{item:!0,xs:!0,children:Object(m.jsx)(S,{buttonText:"Anonymous",buttonType:"primary",smValue:12,id:"Anonymous",onClickCb:function(){return W("Anonymous")},buttonStyle:{backgroundColor:"Anonymous"===w?"#338AD0":"rgba(211,225,240,1)"}})})]})}),[W,w]),H=Object(a.useMemo)((function(){return Object(m.jsx)(ot,{bankClientNames:"Anonymous"===w?v:O,selectedClient:o,handleSelectClient:J,tableData:n,tableType:w,isLoading:V})}),[O,v,n,w,V,o,J]);return Object(m.jsxs)(p.a,{container:!0,spacing:3,style:{paddingBottom:"3vw",paddingLeft:"3vw",paddingRight:"3vw",paddingTop:"6vw"},children:[Object(m.jsxs)(p.a,{item:!0,xs:9,children:[K,H]}),Object(m.jsx)(p.a,{item:!0,xs:3,children:0!==N.a.sum(D)?Object(m.jsx)(st,{chartData:D}):Object(m.jsx)(h.a,{variant:"h6",align:"center",children:"No Data to show pie chart"})})]})},bt=n(91),dt=n(226),pt=Object(bt.a)({overrides:{MuiFormControl:{root:{height:"56px"}},MuiInputBase:{root:{height:"30px",width:"60px"}},typography:{fontFamily:["Lato","sans-serif"].join(",")},MuiTypography:{h6:{fontSize:"16px"}}}});var jt=function(){return Object(m.jsxs)(dt.a,{theme:pt,children:[Object(m.jsx)(J,{}),Object(m.jsx)(F,{}),Object(m.jsx)(ut,{})]})},ft=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,231)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(jt,{})}),document.getElementById("root")),ft()}},[[173,1,2]]]);
//# sourceMappingURL=main.55cc8c07.chunk.js.map